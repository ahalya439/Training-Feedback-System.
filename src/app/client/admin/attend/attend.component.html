
<app-navbar></app-navbar>
<app-side></app-side>
<div class="col-lg-9 col-md-12 right">
  <nav aria-label="breadcrumb ">
    <ol class="no breadcrumb">
     
    </ol>
  </nav>
  <nav aria-label="breadcrumb ">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a routerLink="/attendance">Attendance</a>
      </li>
     
      <li class="breadcrumb-item active" aria-current="page">
        Php Attendance
      </li>
    </ol>
  </nav>
  <h2 class="text-center">Course Attendance</h2>

<div>
  <div class="filter-controls mt-5 ml-5" >
  <label for="year" class="ml-5">Select Year:</label>
  <select id="year"type="number" [(ngModel)]="searchYear" class="me-2" (change)="fetchAttendanceData()">
    <option value="2023">2023</option>
    <option value="2024">2024</option>
   
  </select>

  <label for="month" >Select Month:</label>
  <select id="month"type="number" class="me-2" [(ngModel)]="searchMonth"  (change)="fetchAttendanceData()">
    <option value="1">January</option>
    <option value="2">February</option>
    <option value="3">March</option>
    <option value="4">April</option>
    <option value="5">May</option>
    <option value="6">June</option>
    <option value="7">July</option>
    <option value="8">August</option>
    <option value="9">September</option>
    <option value="10">October</option>
    <option value="11">November</option>
    <option value="12">December</option>
    
  </select>

  <label for="week">Select Week:</label>
  <select id="week"type="number" [(ngModel)]="searchWeek"  (change)="fetchAttendanceData()">
    <option value="1">Week 1</option>
    <option value="2">Week 2</option>
    <option value="3">Week 3</option>
    <option value="4">Week 4</option>
   
  </select>
</div>
<div class="table-responsive mt-4" >
<table class="table ">
  <thead>
 
    
      <tr>
        <th *ngFor="let header of tableHeaders">{{ header }}</th>
      </tr>
 
  </thead>
  <tbody>
  
    <tr *ngFor="let entry of attendanceData; let i = index">
      <th scope="row">{{ i + 1 }}</th>
      <td>{{ entry.tableData[0]['name' + (i + 1)] }}</td>
      <td *ngFor="let status of entry.tableData[0]['attendance' + (i + 1)]; let j = index">
        <span [ngClass]="{'present': status === 'present', 'absent': status === 'absent'}">
          {{ status }}
        </span>
      </td>
    </tr>
    <tr *ngFor="let entry of attendanceData; let i = index">
      <th scope="row">{{ i + 2 }}</th>
      <td>{{ entry.tableData[1]['name' + (i + 2)] }}</td>
      <td *ngFor="let status of entry.tableData[0]['attendance' + (i + 1)]; let j = index">
        <span [ngClass]="{'present': status === 'present', 'absent': status === 'absent'}">
          {{ status }}
        </span>
      </td>
    </tr>
    <tr *ngFor="let entry of attendanceData; let i = index">
      <th scope="row">{{ i + 3 }}</th>
      <td>{{ entry.tableData[2]['name' + (i + 3)] }}</td>
      <td *ngFor="let status of entry.tableData[0]['attendance' + (i + 1)]; let j = index">
        <span [ngClass]="{'present': status === 'present', 'absent': status === 'absent'}">
          {{ status }}
        </span>
      </td>
    </tr>
    <tr *ngFor="let entry of attendanceData; let i = index">
      <th scope="row">{{ i + 4 }}</th>
      <td>{{ entry.tableData[3]['name' + (i + 4)] }}</td>
      <td *ngFor="let status of entry.tableData[0]['attendance' + (i + 1)]; let j = index">
        <span [ngClass]="{'present': status === 'present', 'absent': status === 'absent'}">
          {{ status }}
        </span>
      </td>
    </tr>
   </tbody>
</table>
</div>
</div>
</div>